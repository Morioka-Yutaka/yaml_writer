# Documentation for the `yaml_writer` package.
  
----------------------------------------------------------------
 
 *yaml_writer* 
  
----------------------------------------------------------------
 
### Version information:
  
- Package: yaml_writer
- Version: 0.1.0
- Generated: 2025-08-30T23:49:18
- Author(s): Yutaka Morioka(sasyupi@gmail.com)
- Maintainer(s): Yutaka Morioka(sasyupi@gmail.com)
- License: MIT
- File SHA256: `F*591596323BF7494B333A351F1641181F955965D15DB6760A39F8287B0B18D66A` for this version
- Content SHA256: `C*B77FC680659D0A6EB5760D0C2AD145B97ABC86B602E3F40456E1D20861088E97` for this version
  
---
 
# The `yaml_writer` package, version: `0.1.0`;
  
---
 
Overall Usage Guide

This macro toolkit provides a way to generate YAML directly from SAS.
The workflow is simple:

[1] Wrap YAML output between %yaml_start and %yaml_end.
Everything written between these two macros will be streamed to the output file.

[2] Use &nw. to insert line breaks.
Since PROC STREAM is used internally, &nw. acts as the newline marker.

[3] Write YAML manually or generate it from datasets.
 - You can directly type YAML key–value pairs between %yaml_start and %yaml_end.
- To automatically export dataset content into YAML structures, use %dataset_export.
- This converts dataset observations and variables into mapping/sequence/mappingsequence formats.

[4] For hierarchical YAML structures, preprocess the dataset first.
- Use %nest when you want to create multi-line nested structures (mapping or sequence).
- Use %inline_nest when you want compact inline structures ({} for mappings or [] for sequences).
- After preprocessing, pass the new nested variables into %dataset_export.
  
---
 
  
---
 
Required SAS Components: 
  - Base SAS Software
  
---
 
 
--------------------------------------------------------------------
 
*SAS package generated by SAS Package Framework, version `20250729`*
 
--------------------------------------------------------------------
 
# The `yaml_writer` package content
The `yaml_writer` package consists of the following content:
 
1. [`%dataset_export()` macro ](#datasetexport-macro-1 )
2. [`%inline_nest()` macro ](#inlinenest-macro-2 )
3. [`%nest()` macro ](#nest-macro-3 )
4. [`%yaml_end()` macro ](#yamlend-macro-4 )
5. [`%yaml_start()` macro ](#yamlstart-macro-5 )
  
 
6. [License note](#license)
  
---
 
## `%dataset_export()` macro <a name="datasetexport-macro-1"></a> ######

Macro Name : dataset_export
Function   : Export a SAS dataset into YAML format.
              Designed in the same spirit as the "export" statement
              in PROC JSON.
 Parameters :
   - ds=       : Target SAS dataset
   - wh=       : (Optional) WHERE clause to filter observations
   - varlist=  : Variables to output, separated by spaces
   - indent=   : Indentation level (1 → 2 spaces, 2 → 4 spaces, …)
   - cat=      : Structure type
                   * mapping
                       Name: Alfred
                       Age: 14
                   * sequence
                       - Alfred
                       - 14
                   * mappingsequence
                       - Name: Alfred
                         Age: 14

Example    :
%yaml_start()
sashelp.class: &nw.;
%dataset_export(ds=sashelp.class
             ,wh=%nrbquote(AGE in (13:15))
             ,cat=mapping
             ,varlist=NAME AGE SEX
             ,indent=1)
;;;;
%yaml_end();

  
---
 
## `%inline_nest()` macro <a name="inlinenest-macro-2"></a> ######

Macro Name : inline_nest
 Function   : Create a nested structure in **inline notation**
              (mapping or sequence) and store it as a new variable.
              This is useful when you want compact inline YAML/JSON-like
              representations rather than multi-line structures.
 Parameters :
   - key=       : Name of the new parent variable
                  (must not already exist in the dataset)
   - varlist=   : Variables to be nested under the key
   - cat=       : "mapping" or "sequence"
   - maxlength= : Length of the temporary character variable
                  (set large enough to avoid truncation)

Example    :
data class_inline;
   set sashelp.class;
   %inline_nest(key=HW_inline, varlist=HEIGHT WEIGHT, cat=mapping);
   %inline_nest(key=NAMEAGE_inline, varlist=NAME AGE, cat=sequence);
run;
%yaml_start()
class_inline: &nw.;
%dataset_export(ds=class_inline
             ,wh=%nrbquote(AGE in (13:15))
             ,cat=mappingsequence
             ,varlist=name HW_inline NAMEAGE_inline
             ,indent=1)
;;;;
%yaml_end();

  
---
 
## `%nest()` macro <a name="nest-macro-3"></a> ######

Macro Name : nest
 Function   : Create nested structures in preparation for YAML output.
              A new parent variable (key) is created that contains
              child variables as either a mapping or a sequence.
 Parameters :
   - key=       : Name of the new parent variable (must not exist already)
   - varlist=   : Variables to be nested under the key
   - cat=       : "mapping" or "sequence"
   - indent=    : Indentation level within the YAML structure
   - maxlength= : Length of the temporary character variable
                  (set large enough to avoid truncation)

Example    :
data class_1;
  set sashelp.class;
   %nest(key=HW,   varlist=HEIGHT WEIGHT, cat=mapping, indent=3);
   %nest(key=AHHW, varlist=AGE HW,        cat=mapping, indent=2);
run;
%yaml_start()
class_1: &nw.;
%dataset_export(ds=class_1
             ,wh=%nrbquote(AGE in (13:15))
             ,cat=mappingsequence
             ,varlist=name HW AHHW
             ,indent=1)
;;;;
%yaml_end();

  
---
 
## `%yaml_end()` macro <a name="yamlend-macro-4"></a> ######

Macro Name : yaml_end
Function   : Finalize YAML output. Close the PROC STREAM block
              and complete writing to the output file.
Parameters : (none)

Example    :
%yaml_start(outpath=C:/tmp, file=sample);
#This YAML is a sample &nw.;
person: &nw.;
  name: Yutaka Morioka &nw.;
  age: 41 &nw.;
  height: 170 &nw.;
  weight: 63 &nw.;
%yaml_end();

  
---
 
## `%yaml_start()` macro <a name="yamlstart-macro-5"></a> ######

Macro Name : yaml_start
Function   : Initialize YAML output. Define the output file,
              set up a global newline macro variable,
              and start PROC STREAM.
Parameters :
   - outpath= : Output directory path (default = current directory)
   - file=    : Output file name (".yaml" extension is automatically appended)

Example    :
%yaml_start(outpath=C:/tmp, file=sample);
#This YAML is a sample &nw.;
person: &nw.;
  name: Yutaka Morioka &nw.;
  age: 41 &nw.;
  height: 170 &nw.;
  weight: 63 &nw.;
%yaml_end();


  
---
 
  
---
 
# License <a name="license"></a> ######
 
	Copyright (c) [2025]  [Yutaka Morioka]

Permission is hereby granted, free of charge, to any person obtaining a copy   
of this software and associated documentation files (the "Software"), to deal    
in the Software without restriction, including without limitation the rights   
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell   
copies of the Software, and to permit persons to whom the Software is   
furnished to do so, subject to the following conditions:                      
                                                                                
The above copyright notice and this permission notice shall be included       
in all copies or substantial portions of the Software.                        
                                                                                
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR    
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,      
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE   
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER        
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, 
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE 
SOFTWARE.
  
---
 
